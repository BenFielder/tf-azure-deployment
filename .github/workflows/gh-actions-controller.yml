# Do not edit this file directly! It might be overwritten if you run the workflow, You can make changes in "BenFielder/github-actions-controller"
name: Github Actions Controller
on: workflow_dispatch

permissions:
  contents: write
  pull-requests: write
  issues: write
  repository-projects: write

jobs:
    Update-deployment-workflow:
        runs-on: ubuntu-latest
        steps:

            - name: Create branch
              run: | 
                git branch gh-actions-controller-update
                git switch gh-actions-controller-update
            
            # Comment or uncomment these depending on what workflows you want to use  
            - name: Pull changes on self
              uses: actions/checkout@v4
              with:
                sparse-checkout: BenFielder/github-actions-controller/templates/master-gh-actions-controller.yml
            
            - name: Pull Linting Workflows
              uses: actions/checkout@v4
              with:
                repository: BenFielder/github-actions-controller/templates/linting

            - name: Pull Building Workflows
              uses: actions/checkout@v4
              with:
                  repository: BenFielder/github-actions-controller/templates/building

            - name: Pull Testing Workflows
              uses: actions/checkout@v4
              with:
                  repository: BenFielder/github-actions-controller/templates/testing

            - name: Pull Deployment Workflows
              uses: actions/checkout@v4
              with:
                  repository: BenFielder/github-actions-controller/templates/deploying

            - name: Create Pull Request
              run: | 
                gh pr create --base main --head gh-actions-controller-update --title "chore: GH Actions Controller Update" --body "Updating workflows"
              env:
                GH_DEBUG: 1
                GITHUB_TOKEN: ${{ secrets.GH_AC_TOKEN }}
